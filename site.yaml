---
- name: Setup control plane node
  hosts: node1
  become: true
  serial: 1
  roles:
    - master
    - argocd
    # - helm
    # - istio
    # - monitoring

- name: Setup worker nodes
  hosts: node2:node3:node4
  become: true
  serial: 1
  roles:
    - k3s_shared
    - worker